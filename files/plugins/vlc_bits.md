## bs_init {#bs_init}

```c
static inline void bs_init( bs_t *s, const void *p_data, size_t i_data )
```

### 函数描述
该函数用于初始化一个 `bs_t` 结构体，设置其起始指针、结束指针以及剩余的比特数。

### 函数参数说明

| 参数名   | 类型        | 描述                                                                 |
|----------|-------------|----------------------------------------------------------------------|
| `s`      | `bs_t *`    | 指向 `bs_t` 结构体的指针，用于存储比特流的状态信息。                  |
| `p_data` | `const void *` | 指向比特流数据的起始位置的指针。                                     |
| `i_data` | `size_t`    | 比特流数据的长度（以字节为单位）。                                   |

### 函数返回值
该函数没有返回值。
## bs_pos {#bs_pos}

```c
static inline int bs_pos( const bs_t *s )
```

### 函数描述
该函数用于计算比特流结构 `bs_t` 的当前位置。它返回从比特流开始到当前位置的比特数。

### 函数参数说明

| 参数名 | 类型       | 描述               |
|--------|------------|--------------------|
| `s`    | `const bs_t *` | 指向比特流结构 `bs_t` 的指针，表示当前比特流的状态。 |

### 函数返回值
该函数返回一个整数，表示从比特流开始到当前位置的比特数。返回值的具体计算方式为：
- `8 * ( s->p - s->p_start )` 表示从比特流开始到当前字节位置的字节数乘以 8，得到总的比特数。
- `8 - s->i_left` 表示当前字节中剩余的比特数。
- 两者相加即为从比特流开始到当前位置的比特数。
## bs_eof {#bs_eof}

```c
static inline int bs_eof(const bs_t *s)
{
    return( s->p >= s->p_end ? 1: 0 );
}
```

### 描述
该函数用于检查比特流是否已经到达文件末尾。如果当前指针 `p` 大于或等于结束指针 `p_end`，则表示已经到达文件末尾，返回 1；否则返回 0。

### 参数说明

| 参数名 | 类型      | 描述               |
|--------|-----------|--------------------|
| `s`    | `const bs_t *` | 指向 `bs_t` 结构体的指针，表示当前比特流的状态。 |

### 返回值
- **1**：如果当前指针 `p` 大于或等于结束指针 `p_end`，表示已经到达文件末尾。
- **0**：如果当前指针 `p` 小于结束指针 `p_end`，表示尚未到达文件末尾。
## s->p >= s->p_end {#s_p_greater_than_or_equal_to_s_p_end}

```c
if( s->p >= s->p_end )
{
    break;
}
```

### 描述
该代码片段用于检查指针 `s->p` 是否已经到达或超过了 `s->p_end`。如果条件为真，则跳出当前循环。

### 参数说明
| 参数 | 类型 | 描述 |
|------|------|------|
| `s->p` | 指针 | 当前指针位置 |
| `s->p_end` | 指针 | 指针的结束位置 |

### 返回值
该代码片段没有显式的返回值。它通过 `break` 语句来控制程序流程，跳出当前循环。
## parse_byte {#parse_byte}

```c
void parse_byte(struct Stream *s)
{
    if (s->i_left == 0)
    {
        s->p++;
        s->i_left = 8;
    }
}
```

### 描述
该函数用于解析字节流中的下一个字节。当 `s->i_left` 为 0 时，表示当前字节已经被完全解析，因此需要移动到下一个字节，并将 `s->i_left` 重置为 8。

### 参数说明

| 参数名 | 类型       | 描述                                 |
|--------|------------|--------------------------------------|
| `s`    | `struct Stream *` | 指向 `Stream` 结构的指针，表示当前字节流的状态。 |

### 返回值
该函数没有返回值。
## return 

```c
int return(int i_result);
```

### 描述
该函数用于返回一个整数结果。通常用于在函数执行完毕后，将计算结果或状态码返回给调用者。

### 参数说明

| 参数名    | 类型 | 描述               |
|-----------|------|--------------------|
| `i_result`| `int`| 要返回的整数值。   |

### 返回值
该函数返回传入的 `i_result` 值。具体返回值取决于传入的参数 `i_result`。
## return 

```c
int return(int i_result);
```

### 描述
该函数用于返回一个整数值。通常用于在函数执行完毕后，将结果返回给调用者。

### 参数说明

| 参数名   | 类型 | 描述               |
|----------|------|--------------------|
| i_result | int  | 需要返回的整数值。 |

### 返回值
该函数返回传入的 `i_result` 值。返回值类型为 `int`。
## get_bit {#get_bit}

```c
unsigned int get_bit(struct bitstream_t *s);
```

### 描述
该函数从位流中读取一个比特。如果当前字节中还有未读取的比特，则从当前字节中读取一个比特；否则，移动到下一个字节并读取该字节的最高位。

### 函数参数说明

| 参数名 | 类型                | 描述                                                                 |
|--------|---------------------|----------------------------------------------------------------------|
| s      | struct bitstream_t* | 指向位流结构体的指针，该结构体包含当前读取位置、剩余比特数等信息。 |

### 函数返回值
- **返回值类型**: `unsigned int`
- **返回值说明**:
  - 返回值为 `0` 或 `1`，表示从位流中读取的比特值。
  - 如果位流已经读取完毕（即 `s->p >= s->p_end`），则返回值未定义。
## bs_show {#bs_show}

```c
static inline uint32_t bs_show(bs_t *s, int i_count)
{
    bs_t s_tmp = *s;
    return bs_read(&s_tmp, i_count);
}
```

### 函数描述
`bs_show` 函数用于在不改变比特流状态的情况下，预览比特流中的指定数量的比特。它通过创建比特流状态的临时副本来实现这一点，然后调用 `bs_read` 函数来读取这些比特。

### 函数参数说明

| 参数名   | 类型    | 描述                                                                 |
|----------|---------|--------------------------------------------------------------------------|
| `s`      | `bs_t*` | 指向 `bs_t` 结构体的指针，表示当前的比特流状态。                       |
| `i_count`| `int`   | 需要预览的比特数量。                                                   |

### 函数返回值
函数返回预览的比特值。返回值类型为 `uint32_t`，表示从比特流中读取的比特值。
## bs_skip {#bs_skip}

```c
static inline void bs_skip(bs_t *s, ssize_t i_count)
```

### 函数描述
该函数用于跳过比特流中的指定数量的比特。它会更新比特流结构体中的指针和剩余比特数。

### 函数参数说明

| 参数名   | 类型      | 描述                                                                 |
|----------|-----------|----------------------------------------------------------------------|
| `s`      | `bs_t *`  | 指向比特流结构体的指针，表示当前处理的比特流。                       |
| `i_count`| `ssize_t` | 需要跳过的比特数。正数表示向前跳过，负数表示向后跳过。               |

### 函数返回值
该函数没有返回值。
## set_bits {#set_bits}

```c
void set_bits(struct bit_stream *s, int i_bits, int i_count)
```

### 描述
该函数用于在位流中设置指定数量的位。它根据传入的 `i_bits` 值，逐位设置位流中的相应位。如果当前指针 `s->p` 已经到达位流的末尾，则函数会提前终止。

### 函数参数说明

| 参数名   | 类型           | 描述                                                         |
|----------|----------------|--------------------------------------------------------------|
| `s`      | `struct bit_stream *` | 指向位流结构的指针，包含当前指针位置、剩余位数等信息。 |
| `i_bits` | `int`          | 要设置的位值，函数会根据这个值来设置位流中的位。         |
| `i_count`| `int`          | 要设置的位数，函数会根据这个值来决定设置多少位。         |

### 函数返回值
该函数没有返回值。
## bs_align {#bs_align}

```c
static inline void bs_align( bs_t *s )
```

### 函数描述
该函数用于对位流进行对齐操作。如果当前位流的剩余位数不等于8，则将其对齐到下一个字节边界。

### 函数参数说明

| 参数名 | 类型  | 描述               |
|--------|-------|--------------------|
| `s`    | `bs_t*` | 指向位流结构体的指针 |

### 函数返回值
该函数没有返回值。
## bs_align_0 {#bs_align_0}

```c
static inline void bs_align_0( bs_t *s )
```

### 函数描述
该函数用于将位流对齐到下一个字节边界。如果当前字节中剩余的位数不为8，则将这些位填充为0，并将位流指针移动到下一个字节的起始位置。

### 函数参数说明

| 参数名 | 类型 | 描述 |
|--------|------|------|
| `s`    | `bs_t *` | 指向位流结构体的指针，表示当前操作的位流。 |

### 函数返回值
该函数没有返回值。
## bs_align_1 {#bs_align_1}

```c
static inline void bs_align_1( bs_t *s )
```

### 函数描述
该函数用于将比特流对齐到下一个字节边界。它会不断写入比特，直到剩余的比特数为8，从而确保比特流在字节边界上对齐。

### 函数参数说明

| 参数名 | 类型 | 描述 |
|--------|------|------|
| `s`    | `bs_t *` | 指向 `bs_t` 结构体的指针，表示当前的比特流。 |

### 函数返回值
该函数没有返回值。
