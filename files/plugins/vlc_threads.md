## vlc_mutex_init {#vlc_mutex_init}

```c
VLC_API void vlc_mutex_init( vlc_mutex_t *p_mutex );
```

### 函数描述
该函数用于初始化一个互斥锁。它将传入的 `vlc_mutex_t` 类型的指针所指向的互斥锁初始化为未锁定状态。

### 函数参数说明

| 参数名    | 类型          | 描述               |
|-----------|---------------|--------------------|
| `p_mutex` | `vlc_mutex_t*` | 指向要初始化的互斥锁的指针。 |

### 函数返回值
该函数没有返回值。
## vlc_mutex_init_recursive {#vlc_mutex_init_recursive}

```c
VLC_API void vlc_mutex_init_recursive(vlc_mutex_t *mutex);
```

### 函数描述
初始化一个递归互斥锁。

### 函数参数说明

| 参数名 | 类型        | 描述               |
|--------|-------------|--------------------|
| mutex  | vlc_mutex_t*| 指向要初始化的互斥锁的指针 |

### 函数返回值
该函数没有返回值。
## vlc_mutex_destroy {#vlc_mutex_destroy}

```c
VLC_API void vlc_mutex_destroy(vlc_mutex_t *p_mutex);
```

### 函数描述
`vlc_mutex_destroy` 函数用于销毁一个已经初始化的互斥锁。在调用此函数之前，必须确保互斥锁已经被初始化，并且没有线程持有该互斥锁。销毁一个未初始化的互斥锁或一个被其他线程持有的互斥锁会导致未定义行为。

### 函数参数说明

| 参数名    | 类型          | 描述                                                                 |
|-----------|---------------|--------------------------------------------------------------------------|
| `p_mutex` | `vlc_mutex_t*` | 指向要销毁的互斥锁的指针。在调用此函数之前，必须确保该互斥锁已经被初始化。 |

### 函数返回值
该函数没有返回值。
## vlc_mutex_lock {#vlc_mutex_lock}

```c
VLC_API void vlc_mutex_lock(vlc_mutex_t *mutex);
```

### 描述
该函数用于锁定一个互斥锁（mutex）。如果互斥锁已经被其他线程锁定，调用线程将会阻塞，直到该互斥锁被解锁。

### 函数参数说明

| 参数名 | 类型          | 描述               |
|--------|---------------|--------------------|
| mutex  | vlc_mutex_t * | 指向要锁定的互斥锁 |

### 函数返回值
该函数没有返回值。
## vlc_mutex_unlock {#vlc_mutex_unlock}

```c
VLC_API void vlc_mutex_unlock( vlc_mutex_t * );
```

### 函数描述
`vlc_mutex_unlock` 函数用于解锁一个互斥锁。在调用此函数之前，必须确保互斥锁已经被当前线程锁定。解锁后，其他线程可以再次锁定该互斥锁。

### 函数参数说明

| 参数名       | 类型          | 描述                                                                 |
|--------------|---------------|--------------------------------------------------------------------------|
| `vlc_mutex_t *` | `vlc_mutex_t*` | 指向要解锁的互斥锁的指针。在使用此函数之前，必须确保该互斥锁已经被当前线程锁定。 |

### 函数返回值
该函数没有返回值。
## vlc_cond_init {#vlc_cond_init}

```c
VLC_API void vlc_cond_init( vlc_cond_t * );
```

### 函数描述
初始化条件变量。

### 函数参数说明
| 参数名 | 类型 | 描述 |
|--------|------|------|
| vlc_cond_t * | vlc_cond_t * | 指向要初始化的条件变量的指针。 |

### 函数返回值
该函数没有返回值。
## vlc_cond_init_daytime {#vlc_cond_init_daytime}

```c
VLC_API void vlc_cond_init_daytime(vlc_cond_t *cond);
```

### 描述
该函数用于初始化一个条件变量，使其与系统时钟相关联。条件变量是一种同步机制，允许线程在某个条件为真时等待，或者在条件发生变化时通知其他线程。

### 函数参数说明

| 参数名 | 类型        | 描述                               |
|--------|-------------|------------------------------------|
| cond   | vlc_cond_t* | 指向要初始化的条件变量的指针。     |

### 函数返回值
该函数没有返回值。
## vlc_cond_destroy {#vlc_cond_destroy}

```c
VLC_API void vlc_cond_destroy( vlc_cond_t * );
```

### 函数描述
销毁一个条件变量。条件变量在使用完毕后必须被销毁，以释放其占用的资源。

### 函数参数说明

| 参数名       | 类型        | 描述                                                                 |
|--------------|-------------|--------------------------------------------------------------------------|
| `vlc_cond_t *` | `vlc_cond_t*` | 指向要销毁的条件变量的指针。条件变量在使用前必须通过 `vlc_cond_init` 初始化。 |

### 函数返回值
该函数没有返回值。
## vlc_cond_signal {#vlc_cond_signal}

```c
VLC_API void vlc_cond_signal(vlc_cond_t *cond);
```

### 函数描述
`vlc_cond_signal` 函数用于唤醒一个等待在条件变量上的线程。如果当前没有线程在等待该条件变量，则此函数不执行任何操作。

### 函数参数说明

| 参数名 | 类型        | 描述                   |
|--------|-------------|------------------------|
| cond   | vlc_cond_t* | 指向条件变量的指针。该条件变量用于唤醒等待的线程。 |

### 函数返回值
该函数没有返回值。
## vlc_cond_broadcast {#vlc_cond_broadcast}

```c
VLC_API void vlc_cond_broadcast(vlc_cond_t *);
```

### 描述
该函数用于唤醒所有等待在条件变量上的线程。调用此函数后，所有等待在指定条件变量上的线程都将被唤醒。

### 函数参数说明

| 参数名          | 类型          | 描述                                                                 |
|-----------------|---------------|--------------------------------------------------------------------------|
| vlc_cond_t *    | vlc_cond_t *  | 指向条件变量的指针。该条件变量用于同步多个线程，通常与互斥锁一起使用。 |

### 函数返回值
该函数没有返回值。
## vlc_cond_wait {#vlc_cond_wait}

```c
VLC_API void vlc_cond_wait(vlc_cond_t *cond, vlc_mutex_t *mutex);
```

### 函数描述
`vlc_cond_wait` 函数用于在条件变量上等待，直到条件变量被通知。在等待期间，当前线程会释放指定的互斥锁，并在被唤醒时重新获取该互斥锁。

### 函数参数说明

| 参数名  | 类型          | 描述                                                                 |
|---------|---------------|--------------------------------------------------------------------------|
| `cond`  | `vlc_cond_t *` | 指向条件变量的指针，线程将在该条件变量上等待。                         |
| `mutex` | `vlc_mutex_t *`| 指向互斥锁的指针，该互斥锁在等待期间会被释放，并在被唤醒时重新获取。 |

### 函数返回值
该函数没有返回值。
## vlc_cond_timedwait {#vlc_cond_timedwait}

```c
VLC_API int vlc_cond_timedwait(vlc_cond_t *cond, vlc_mutex_t *mutex, mtime_t deadline);
```

### 描述
该函数用于在条件变量上等待，直到指定的超时时间到达。如果条件变量被其他线程发出信号，或者超时时间到达，等待将结束。

### 函数参数说明

| 参数名    | 类型          | 描述                                                                 |
|-----------|---------------|--------------------------------------------------------------------------|
| `cond`    | `vlc_cond_t *` | 指向要等待的条件变量的指针。                                             |
| `mutex`   | `vlc_mutex_t *` | 指向与条件变量关联的互斥锁的指针。在调用此函数之前，互斥锁必须被锁定。 |
| `deadline`| `mtime_t`      | 等待的超时时间，以微秒为单位。如果为 `VLC_TS_INVALID`，则表示无限等待。 |

### 函数返回值

- `0`：条件变量被其他线程发出信号，等待成功结束。
- `ETIMEDOUT`：超时时间到达，等待结束。
- 其他非零值：表示等待过程中发生了错误。
## vlc_sem_init {#vlc_sem_init}

```c
VLC_API void vlc_sem_init(vlc_sem_t *sem, unsigned value);
```

### 函数描述
初始化一个信号量。信号量是一个用于线程同步的机制，可以用来控制多个线程对共享资源的访问。`vlc_sem_init` 函数用于初始化一个信号量，并设置其初始值。

### 函数参数说明

| 参数名 | 类型       | 描述                                                                 |
|--------|------------|--------------------------------------------------------------------------|
| sem    | vlc_sem_t* | 指向要初始化的信号量的指针。信号量是一个结构体，通常用于线程同步。|
| value  | unsigned   | 信号量的初始值。该值表示信号量的初始可用资源数。|

### 函数返回值
该函数没有返回值。
## vlc_sem_destroy {#vlc_sem_destroy}

```c
VLC_API void vlc_sem_destroy(vlc_sem_t *);
```

### 函数描述
销毁一个先前初始化的信号量。

### 函数参数说明

| 参数名       | 类型        | 描述               |
|--------------|-------------|--------------------|
| `sem`        | `vlc_sem_t*`| 指向要销毁的信号量的指针。 |

### 函数返回值
该函数没有返回值。
## vlc_sem_post {#vlc_sem_post}

```c
VLC_API int vlc_sem_post(vlc_sem_t *sem);
```

### 描述

`vlc_sem_post` 函数用于增加一个信号量（semaphore）的值。如果信号量的值因此变为正数，那么等待该信号量的线程将被唤醒。

### 函数参数说明

| 参数名 | 类型       | 描述                   |
|--------|------------|------------------------|
| `sem`  | `vlc_sem_t*` | 指向要增加的信号量的指针。 |

### 函数返回值

- 如果函数成功执行，返回 `0`。
- 如果发生错误，返回 `-1`，并设置 `errno` 以指示错误类型。可能的错误包括：
  - `EINVAL`：`sem` 参数无效。
  - `EOVERFLOW`：信号量的值超过了最大允许值。
## vlc_sem_wait {#vlc_sem_wait}

```c
VLC_API void vlc_sem_wait(vlc_sem_t *sem);
```

### 函数描述

`vlc_sem_wait` 函数用于等待一个信号量。如果信号量的值大于零，则该函数会立即返回并将信号量的值减一。如果信号量的值为零，则该函数会阻塞，直到信号量的值大于零为止。

### 函数参数说明

| 参数名 | 类型       | 描述               |
|--------|------------|--------------------|
| `sem`  | `vlc_sem_t*` | 指向要等待的信号量的指针。 |

### 函数返回值

该函数没有返回值。
## vlc_rwlock_init {#vlc_rwlock_init}

```c
VLC_API void vlc_rwlock_init(vlc_rwlock_t *lock);
```

### 函数描述
该函数用于初始化一个读写锁（`vlc_rwlock_t`）。读写锁允许多个线程同时读取共享资源，但在写入时只允许一个线程访问。初始化后的读写锁处于未锁定状态。

### 函数参数说明

| 参数名 | 类型           | 描述                       |
|--------|----------------|----------------------------|
| lock   | vlc_rwlock_t * | 指向要初始化的读写锁的指针 |

### 函数返回值
该函数没有返回值。
## vlc_rwlock_destroy {#vlc_rwlock_destroy}

```c
VLC_API void vlc_rwlock_destroy(vlc_rwlock_t *);
```

### 函数描述
销毁一个读写锁。在调用此函数之前，必须确保没有线程持有该锁。

### 函数参数说明

| 参数名         | 类型           | 描述                   |
|----------------|----------------|------------------------|
| vlc_rwlock_t * | vlc_rwlock_t * | 指向要销毁的读写锁的指针 |

### 函数返回值
该函数没有返回值。
## vlc_rwlock_rdlock {#vlc_rwlock_rdlock}

```c
VLC_API void vlc_rwlock_rdlock(vlc_rwlock_t *);
```

### 函数描述
该函数用于获取读锁。如果写锁已经被其他线程持有，则调用线程将被阻塞，直到读锁可以被安全地获取。

### 函数参数说明

| 参数名          | 类型           | 描述               |
|-----------------|----------------|--------------------|
| `vlc_rwlock_t *` | `vlc_rwlock_t*` | 指向读写锁对象的指针 |

### 函数返回值
该函数没有返回值。
## vlc_rwlock_wrlock {#vlc_rwlock_wrlock}

```c
VLC_API void vlc_rwlock_wrlock(vlc_rwlock_t *);
```

### 描述
该函数用于获取读写锁的写锁。在调用此函数后，线程将获得写锁，其他线程将无法获取读锁或写锁，直到当前线程释放写锁。

### 函数参数说明

| 参数名          | 类型           | 描述                 |
|-----------------|----------------|----------------------|
| vlc_rwlock_t *  | vlc_rwlock_t * | 指向读写锁对象的指针 |

### 函数返回值
该函数没有返回值。
## vlc_rwlock_unlock {#vlc_rwlock_unlock}

```c
VLC_API void vlc_rwlock_unlock(vlc_rwlock_t *);
```

### 函数描述
该函数用于释放读写锁。调用此函数后，锁将被释放，允许其他线程获取该锁。

### 函数参数说明

| 参数名         | 类型            | 描述                                                         |
|----------------|-----------------|--------------------------------------------------------------|
| `vlc_rwlock_t *` | `vlc_rwlock_t *` | 指向要释放的读写锁的指针。该锁必须已经通过 `vlc_rwlock_rdlock` 或 `vlc_rwlock_wrlock` 获取。 |

### 函数返回值
该函数没有返回值。
## vlc_threadvar_delete {#vlc_threadvar_delete}

```c
VLC_API void vlc_threadvar_delete(vlc_threadvar_t *key);
```

### 函数描述
该函数用于删除一个线程局部存储（Thread Local Storage, TLS）变量。删除后，该变量将不再有效，并且不能再用于存储或检索线程局部数据。

### 函数参数说明

| 参数名 | 类型            | 描述                                                         |
| ------ | --------------- | ------------------------------------------------------------ |
| key    | vlc_threadvar_t*| 指向要删除的线程局部存储变量的指针。删除后，该变量将不再有效。|

### 函数返回值
该函数没有返回值。
## vlc_threadvar_set {#vlc_threadvar_set}

```c
VLC_API int vlc_threadvar_set(vlc_threadvar_t, void *);
```

### 函数描述
该函数用于将一个值设置到当前线程的线程局部存储（thread-local storage）中。线程局部存储是一种机制，允许每个线程拥有自己的变量实例，这些变量在不同的线程中可以有不同的值。

### 函数参数说明

| 参数名           | 类型              | 描述                                                                 |
|------------------|-------------------|--------------------------------------------------------------------|
| `vlc_threadvar_t` | `vlc_threadvar_t` | 线程局部存储的键（key），用于标识线程局部存储的变量。                 |
| `void *`         | `void *`          | 要设置到线程局部存储中的值。如果为 `NULL`，则表示清除该线程局部存储。 |

### 函数返回值
- 如果成功设置线程局部存储的值，函数返回 `0`。
- 如果发生错误，函数返回 `-1`，并设置 `errno` 以指示错误类型。可能的错误包括：
  - `EINVAL`：无效的 `vlc_threadvar_t` 键。
  - `ENOMEM`：内存不足，无法分配所需的资源。
## vlc_threadvar_get {#vlc_threadvar_get}

```c
VLC_API void * vlc_threadvar_get(vlc_threadvar_t);
```

### 描述

该函数用于获取与指定线程局部变量关联的值。如果当前线程尚未设置该变量的值，则返回 `NULL`。

### 函数参数说明

| 参数名            | 类型              | 描述                                                                 |
|-------------------|-------------------|--------------------------------------------------------------------------|
| `vlc_threadvar_t` | `vlc_threadvar_t` | 要获取值的线程局部变量的标识符。该标识符通常通过 `vlc_threadvar_create` 创建。 |

### 函数返回值

- **返回值类型**: `void *`
- **返回值说明**:
  - 如果成功获取到线程局部变量的值，则返回该值的指针。
  - 如果当前线程尚未设置该变量的值，则返回 `NULL`。
## vlc_cancel {#vlc_cancel}

```c
VLC_API void vlc_cancel(vlc_thread_t thread);
```

### 描述
该函数用于取消指定的线程。取消操作会向目标线程发送一个取消请求，目标线程在适当的时候会处理这个请求。需要注意的是，取消操作并不一定会立即终止线程，而是取决于线程是否在可取消点（cancellation point）处。

### 函数参数说明

| 参数名  | 类型          | 描述                                                                 |
|---------|---------------|--------------------------------------------------------------------------|
| thread  | vlc_thread_t  | 目标线程的句柄。指定要取消的线程。如果传入 `NULL`，则取消当前线程。 |

### 函数返回值
该函数没有返回值。
## vlc_join {#vlc_join}

```c
VLC_API void vlc_join(vlc_thread_t, void **);
```

### 描述
该函数用于等待一个线程终止并回收其资源。它类似于 POSIX 的 `pthread_join` 函数。

### 函数参数说明

| 参数名       | 类型          | 描述                                                                 |
|--------------|---------------|--------------------------------------------------------------------------|
| `vlc_thread_t` | `vlc_thread_t` | 要等待的线程的标识符。                                                 |
| `void **`      | `void **`      | 指向一个指针的指针，用于接收线程的返回值（如果有）。如果不需要返回值，可以传入 `NULL`。 |

### 函数返回值
该函数没有返回值。如果线程成功终止并被回收，函数将正常返回。如果线程已经终止，函数也会立即返回。
## vlc_control_cancel {#vlc_control_cancel}

```c
VLC_API void vlc_control_cancel(int cmd, ...);
```

### 描述

`vlc_control_cancel` 函数用于向 VLC 媒体播放器发送取消操作的命令。该函数通过可变参数列表来传递命令及其参数。

### 函数参数说明

| 参数名 | 类型 | 描述 |
|--------|------|------|
| `cmd`  | `int` | 要执行的取消操作的命令标识符。 |
| `...`  | `va_list` | 可变参数列表，包含命令所需的额外参数。 |

### 函数返回值

该函数没有返回值。
## mdate {#mdate}

```c
VLC_API mtime_t mdate(void);
```

### 描述

该函数返回当前时间，以微秒为单位。时间是从某个固定但未指定的起点开始计算的。

### 函数参数说明

| 参数名 | 类型 | 描述 |
|--------|------|------|
| void   | void | 无参数 |

### 函数返回值

该函数返回当前时间，以微秒为单位。返回值类型为 `mtime_t`，通常是一个表示时间的整数类型。
## mwait {#mwait}

```c
VLC_API void mwait(mtime_t deadline);
```

### 描述
`mwait` 函数用于将当前线程暂停，直到指定的截止时间。该函数通常用于实现精确的时间控制，例如在多媒体播放中等待特定的时间点。

### 函数参数说明

| 参数名   | 类型     | 描述                                                         |
|----------|----------|--------------------------------------------------------------|
| `deadline` | `mtime_t` | 线程暂停的截止时间。线程将一直暂停，直到当前时间达到或超过这个截止时间。 |

### 函数返回值
该函数没有返回值。
## msleep {#msleep}

```c
VLC_API void msleep(mtime_t delay);
```

### 描述
`msleep` 函数用于使当前线程休眠指定的时间。休眠的时间以微秒为单位，由 `delay` 参数指定。

### 函数参数说明

| 参数名 | 类型    | 描述                         |
|--------|---------|------------------------------|
| delay  | mtime_t | 休眠的时间，单位为微秒 (µs) |

### 函数返回值
该函数没有返回值。
## impossible_delay {#impossible_delay}

```c
mtime_t impossible_delay( mtime_t delay )
```

### 描述
该函数用于返回一个不可能的延迟时间。无论传入的延迟时间 `delay` 是多少，函数都会返回一个固定的最小睡眠时间 `VLC_HARD_MIN_SLEEP`。

### 函数参数说明

| 参数名 | 类型   | 描述                 |
|--------|--------|----------------------|
| delay  | mtime_t| 传入的延迟时间参数，但该参数在函数中被忽略。 |

### 函数返回值
函数始终返回 `VLC_HARD_MIN_SLEEP`，表示一个固定的最小睡眠时间。
## harmful_delay {#harmful_delay}

```c
mtime_t harmful_delay( mtime_t delay )
```

### 函数描述
该函数接收一个时间延迟值 `delay`，并将其原样返回。

### 函数参数说明

| 参数名 | 类型   | 描述               |
|--------|--------|--------------------|
| delay  | mtime_t| 需要延迟的时间值 |

### 函数返回值
- **返回值类型**: `mtime_t`
- **返回值说明**: 返回传入的 `delay` 值，即原样返回。
## impossible_deadline {#impossible_deadline}

```c
mtime_t impossible_deadline( mtime_t deadline )
```

### 函数描述
该函数返回传入的截止时间（deadline）。它不做任何修改，直接返回传入的值。

### 函数参数说明

| 参数名   | 类型    | 描述               |
|----------|---------|--------------------|
| deadline | mtime_t | 传入的截止时间     |

### 函数返回值
该函数返回传入的 `deadline` 值，不做任何修改。
## vlc_timer_destroy {#vlc_timer_destroy}

```c
VLC_API void vlc_timer_destroy(vlc_timer_t timer);
```

### 函数描述
该函数用于销毁一个先前创建的定时器。销毁定时器会停止定时器并释放与之相关的资源。

### 函数参数说明

| 参数名 | 类型        | 描述                   |
|--------|-------------|------------------------|
| timer  | vlc_timer_t | 要销毁的定时器对象。   |

### 函数返回值
该函数没有返回值。
## vlc_timer_schedule {#vlc_timer_schedule}

```c
VLC_API void vlc_timer_schedule(vlc_timer_t timer, bool absolute, mtime_t value, mtime_t interval);
```

### 描述

该函数用于调度一个定时器。定时器可以在绝对时间或相对时间触发。如果 `absolute` 参数为 `true`，则定时器将在指定的绝对时间触发；如果为 `false`，则定时器将在当前时间加上 `value` 的时间后触发。`interval` 参数指定了定时器触发后的重复间隔时间。

### 函数参数说明

| 参数名    | 类型      | 描述                                                                 |
|-----------|-----------|----------------------------------------------------------------------|
| `timer`   | `vlc_timer_t` | 要调度的定时器对象。                                                 |
| `absolute`| `bool`      | 如果为 `true`，则 `value` 表示绝对时间；如果为 `false`，则 `value` 表示相对时间。 |
| `value`   | `mtime_t`   | 定时器触发的时间值。如果 `absolute` 为 `true`，则表示绝对时间；否则表示相对时间。 |
| `interval`| `mtime_t`   | 定时器触发后的重复间隔时间。如果为 `0`，则定时器只触发一次。          |

### 函数返回值

该函数没有返回值。
## vlc_GetCPUCount {#vlc_GetCPUCount}

```c
VLC_API unsigned vlc_GetCPUCount(void);
```

### 描述
该函数用于获取当前系统中可用的CPU核心数量。它返回一个无符号整数，表示系统中可用的CPU核心数。

### 函数参数说明
| 参数名 | 类型 | 描述 |
|--------|------|------|
| void   | void | 无参数 |

### 函数返回值
- **返回值类型**: `unsigned`
- **返回值说明**:
  - 返回一个无符号整数，表示当前系统中可用的CPU核心数量。如果无法确定CPU核心数量，可能会返回0。
## vlc_savecancel {#vlc_savecancel}

```c
VLC_API int vlc_savecancel(void);
```

### 描述

该函数用于保存当前的取消状态，并禁用取消功能。它返回一个整数，该整数可以在后续调用 `vlc_restorecancel` 时使用，以恢复之前的取消状态。

### 函数参数说明

| 参数名 | 类型 | 描述 |
|--------|------|------|
| 无     | 无   | 无   |

### 函数返回值

该函数返回一个整数，表示当前的取消状态。这个整数可以在后续调用 `vlc_restorecancel` 时使用，以恢复之前的取消状态。返回值的具体含义如下：

- **非零值**：表示当前的取消状态。这个值可以传递给 `vlc_restorecancel` 以恢复取消状态。
- **零值**：表示当前没有取消状态需要保存。
## vlc_restorecancel {#vlc_restorecancel}

```c
VLC_API void vlc_restorecancel(int state);
```

### 描述
恢复先前保存的取消状态。

### 函数参数说明

| 参数名 | 类型 | 描述 |
|--------|------|------|
| state  | int  | 先前通过 `vlc_savecancel()` 保存的取消状态。 |

### 函数返回值
该函数没有返回值。
## vlc_testcancel {#vlc_testcancel}

```c
VLC_API void vlc_testcancel(void);
```

### 函数描述
`vlc_testcancel` 函数用于检查当前线程是否被取消，并在需要时执行取消操作。如果线程被标记为取消，该函数将调用 `vlc_cancel` 来终止线程。

### 函数参数说明
该函数没有参数。

| 参数名 | 类型 | 描述 |
|--------|------|------|
| 无     | 无   | 无   |

### 函数返回值
该函数没有返回值。
## vlc_control_cancel {#vlc_control_cancel}

```c
void vlc_control_cancel(vlc_cleanup_t *cl)
```

### 描述

该函数用于控制取消操作。它从清理堆栈中弹出一个清理函数，并在必要时调用它。

### 函数参数说明

| 参数名 | 类型          | 描述                                                         |
| ------ | ------------- | ------------------------------------------------------------ |
| cl     | vlc_cleanup_t | 指向清理堆栈的指针，表示要弹出的清理函数。如果为 `NULL`，则不执行任何操作。 |

### 函数返回值

该函数没有返回值。
## vlc_control_cancel {#vlc_control_cancel}

```c
void vlc_control_cancel(vlc_cleanup_t *cl);
```

### 描述
该函数用于控制取消操作。它接受一个 `vlc_cleanup_t` 类型的参数，并执行相应的清理操作。

### 函数参数说明

| 参数名 | 类型          | 描述                 |
|--------|---------------|----------------------|
| cl     | vlc_cleanup_t | 指向清理操作的指针   |

### 函数返回值
该函数没有返回值。
## vlc_poll {#vlc_poll}

```c
static inline int vlc_poll (struct pollfd *fds, unsigned nfds, int timeout)
```

### 描述
该函数是一个内联函数，用于在 OS/2 系统上调用 `vlc_poll_os2` 函数。它首先检查 `vlc_poll_os2` 函数是否已经被加载，如果没有，则尝试从 `vlccore` 模块中加载该函数。如果加载失败，函数将返回 -1。如果加载成功，则调用 `vlc_poll_os2` 函数并返回其结果。

### 参数说明

| 参数名  | 类型          | 描述                                                                 |
|---------|---------------|--------------------------------------------------------------------------|
| fds     | `struct pollfd *` | 指向 `pollfd` 结构体数组的指针，用于指定要监视的文件描述符及其事件。 |
| nfds    | `unsigned`        | `pollfd` 结构体数组中的元素数量。                                      |
| timeout | `int`             | 超时时间，单位为毫秒。如果为负数，表示无限等待。                      |

### 返回值
- 如果成功，返回值为 `vlc_poll_os2` 函数的返回值。
- 如果加载 `vlc_poll_os2` 函数失败，返回值为 -1。
## vlc_poll {#vlc_poll}

```c
static inline int vlc_poll(struct pollfd *fds, unsigned nfds, int timeout)
```

### 函数描述
`vlc_poll` 函数是对标准 `poll` 函数的封装，用于在指定的文件描述符上等待事件发生。该函数通过循环调用 `poll`，并在每次调用后减少超时时间，直到超时时间耗尽或事件发生。如果超时时间大于等于 50 毫秒，则每次调用 `poll` 时最多等待 50 毫秒，以避免长时间阻塞。

### 函数参数说明

| 参数名   | 类型          | 描述                                                                 |
|----------|---------------|--------------------------------------------------------------------------|
| `fds`    | `struct pollfd*` | 指向 `pollfd` 结构体数组的指针，用于指定要监视的文件描述符及其事件类型。 |
| `nfds`   | `unsigned`      | 指定 `fds` 数组中的元素个数。                                           |
| `timeout`| `int`           | 指定等待事件的超时时间（以毫秒为单位）。如果为负数，表示无限等待。     |

### 函数返回值
- **`val > 0`**: 表示有事件发生，返回值为 `fds` 数组中发生事件的文件描述符数量。
- **`val == 0`**: 表示超时时间内没有事件发生。
- **`val < 0`**: 表示 `poll` 调用失败，返回值为负数，表示错误。
## vlc_cleanup_lock {#vlc_cleanup_lock}

```c
static inline void vlc_cleanup_lock (void *lock)
{
    vlc_mutex_unlock ((vlc_mutex_t *)lock);
}
```

### 描述

`vlc_cleanup_lock` 是一个内联函数，用于在清理过程中解锁互斥锁。该函数通常用于线程取消（thread cancellation）的上下文中，确保在取消线程时能够正确地释放锁资源。

### 函数参数说明

| 参数名 | 类型          | 描述                                                                 |
|--------|---------------|--------------------------------------------------------------------------|
| lock   | `void *`      | 指向互斥锁的指针。该指针会被强制转换为 `vlc_mutex_t *` 类型并传递给 `vlc_mutex_unlock` 函数。 |

### 函数返回值

该函数没有返回值。
## vlc_mutex_lock {#vlc_mutex_lock}

```c
void vlc_mutex_lock(vlc_mutex_t *lock);
```

### 描述
该函数用于锁定一个互斥锁（mutex）。如果互斥锁当前被其他线程持有，调用线程将阻塞，直到互斥锁可用为止。

### 函数参数说明

| 参数名 | 类型          | 描述               |
|--------|---------------|--------------------|
| lock   | vlc_mutex_t * | 指向要锁定的互斥锁的指针 |

### 函数返回值
该函数没有返回值。
## vlc_mutex_unlock {#vlc_mutex_unlock}

```c
void vlc_mutex_unlock(vlc_mutex_t *lock);
```

### 描述
`vlc_mutex_unlock` 函数用于解锁一个互斥锁。调用此函数后，互斥锁将被释放，允许其他线程获取该锁。

### 函数参数说明

| 参数名 | 类型          | 描述                         |
|--------|---------------|------------------------------|
| lock   | vlc_mutex_t*  | 指向要解锁的互斥锁的指针。   |

### 函数返回值
该函数没有返回值。
## vlc_global_mutex {#vlc_global_mutex}

```c
VLC_API void vlc_global_mutex( unsigned, bool );
```

### 描述
该函数用于获取或释放全局互斥锁。它通过传递一个索引和一个布尔值来确定是获取锁还是释放锁。

### 函数参数说明

| 参数名 | 类型    | 描述                                                                 |
|--------|---------|--------------------------------------------------------------------|
| index  | unsigned| 互斥锁的索引，用于标识要操作的特定全局互斥锁。                       |
| acquire| bool    | 布尔值，`true` 表示获取锁，`false` 表示释放锁。                      |

### 函数返回值
该函数没有返回值。
## vlc_cleanup_t {#vlc_cleanup_t}

```c
struct vlc_cleanup_t
{
    vlc_cleanup_t *next;
    void         (*proc) (void *);
    void          *data;
};
```

### 描述
`vlc_cleanup_t` 结构体用于管理清理操作。它通常用于在特定情况下执行清理操作，例如在对象销毁时释放资源。

### 字段说明

| 字段名 | 类型 | 描述 |
|--------|------|------|
| `next` | `vlc_cleanup_t *` | 指向下一个清理操作的指针，用于形成链表。 |
| `proc` | `void (*)(void *)` | 指向清理函数的指针，该函数将在需要时被调用。 |
| `data` | `void *` | 传递给清理函数的参数。 |

### 返回值
该结构体本身不返回值，它用于定义和管理清理操作。
