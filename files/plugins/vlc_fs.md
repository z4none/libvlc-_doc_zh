## vlc_mkdir {#vlc_mkdir}

```c
VLC_API int vlc_mkdir( const char *filename, mode_t mode );
```

### 描述
该函数用于创建一个目录。它类似于标准的 `mkdir` 函数，但具有一些额外的功能，例如在某些平台上处理路径分隔符的差异。

### 函数参数说明

| 参数名   | 类型      | 描述                                                         |
|----------|-----------|--------------------------------------------------------------|
| filename | `const char *` | 要创建的目录的路径。路径可以是相对路径或绝对路径。           |
| mode     | `mode_t`      | 指定新创建目录的权限。权限值通常使用八进制表示，例如 `0755`。 |

### 函数返回值
- **成功**：返回 `0`，表示目录创建成功。
- **失败**：返回 `-1`，并设置 `errno` 以指示错误原因。可能的错误包括：
  - `EEXIST`：指定的路径已经存在。
  - `EACCES`：权限不足，无法创建目录。
  - `ENAMETOOLONG`：路径名过长。
  - `ENOENT`：路径中的某个部分不存在。
  - `ENOTDIR`：路径中的某个部分不是目录。
  - `EROFS`：文件系统是只读的。
  - `ENOSPC`：磁盘空间不足。
  - `ELOOP`：路径中存在循环符号链接。
  - `EIO`：发生输入/输出错误。
## vlc_unlink {#vlc_unlink}

```c
VLC_API int vlc_unlink( const char *filename );
```

### 描述
`vlc_unlink` 函数用于删除指定的文件。它类似于标准库中的 `unlink` 函数，但提供了跨平台的支持，确保在不同操作系统上都能正确删除文件。

### 函数参数说明

| 参数名    | 类型        | 描述                                                         |
|-----------|-------------|--------------------------------------------------------------|
| `filename`| `const char *` | 指向要删除的文件路径的字符串。路径可以是相对路径或绝对路径。 |

### 函数返回值
- **成功**：返回 `0`，表示文件已成功删除。
- **失败**：返回 `-1`，并设置 `errno` 以指示错误原因。可能的 `errno` 值包括：
  - `ENOENT`：文件不存在。
  - `EACCES`：权限不足，无法删除文件。
  - `EPERM`：操作被禁止，例如在某些系统上删除只读文件。
  - `EBUSY`：文件正在被使用，无法删除。
  - `EIO`：发生 I/O 错误。
  - 其他可能的 `errno` 值取决于操作系统和具体实现。
## vlc_rename {#vlc_rename}

```c
VLC_API int vlc_rename( const char *oldpath, const char *newpath );
```

### 描述
该函数用于将文件或目录从 `oldpath` 重命名为 `newpath`。如果 `newpath` 已经存在，则该函数将失败。

### 函数参数说明

| 参数名   | 类型        | 描述                   |
|----------|-------------|------------------------|
| oldpath  | const char* | 原文件或目录的路径     |
| newpath  | const char* | 新文件或目录的路径     |

### 函数返回值
- **成功**：返回 `0`。
- **失败**：返回 `-1`，并设置 `errno` 以指示错误类型。可能的 `errno` 值包括：
  - `EACCES`：权限不足，无法访问 `oldpath` 或 `newpath`。
  - `EEXIST`：`newpath` 已经存在。
  - `ENOENT`：`oldpath` 不存在。
  - `ENOTDIR`：路径中的某个部分不是目录。
  - `EISDIR`：`newpath` 是一个目录，但 `oldpath` 不是。
  - 其他标准 `errno` 值。
## vlc_closedir 

```c
static inline int vlc_closedir(DIR *dir)
{
    vlc_DIR *vdir = (vlc_DIR *)dir;
    _WDIR *wdir = vdir->wdir;

    free(vdir->entry);
    free(vdir);
    return (wdir != NULL) ? _wclosedir(wdir) : 0;
}
```

### 描述
该函数用于关闭一个目录流并释放相关的资源。它首先释放目录流中的条目缓冲区，然后释放目录流本身。如果目录流不为空，则调用 `_wclosedir` 函数关闭目录流。

### 参数说明

| 参数名 | 类型   | 描述               |
|--------|--------|--------------------|
| `dir`  | `DIR*` | 指向要关闭的目录流的指针。 |

### 返回值
- 如果目录流成功关闭，返回 `0`。
- 如果目录流为空（即 `wdir` 为 `NULL`），也返回 `0`。
- 如果 `_wclosedir` 函数调用失败，返回 `_wclosedir` 的返回值，通常是一个非零值表示错误。
## vlc_closedir 

```c
static inline void vlc_closedir( DIR *dir )
{
    _WDIR *wdir = *(_WDIR **)dir;

    _wclosedir( wdir );
}
```

### 描述
该函数用于关闭一个目录流。它通过调用 `_wclosedir` 函数来关闭指定的目录流。

### 参数说明
| 参数名 | 类型 | 描述 |
|--------|------|------|
| `dir`  | `DIR*` | 指向要关闭的目录流的指针。 |

### 返回值
该函数没有返回值。

---

## vlc_rewinddir {#vlc_rewinddir}

```c
static inline void vlc_rewinddir( DIR *dir )
{
    _WDIR *wdir = *(_WDIR **)dir;

    _wrewinddir( wdir );
}
```

### 描述
该函数用于重置目录流的位置到目录的起始位置。它通过调用 `_wrewinddir` 函数来实现这一功能。

### 参数说明
| 参数名 | 类型 | 描述 |
|--------|------|------|
| `dir`  | `DIR*` | 指向要重置的目录流的指针。 |

### 返回值
该函数没有返回值。
## vlc_stat {#vlc_stat}

```c
VLC_API int vlc_stat( const char *filename, struct stat *buf );
```

### 描述
该函数用于获取文件或目录的状态信息。它类似于标准库中的 `stat` 函数，但提供了额外的功能和跨平台的兼容性。

### 函数参数说明

| 参数名    | 类型          | 描述                                                                 |
|-----------|---------------|--------------------------------------------------------------------------|
| filename  | const char *  | 指向文件或目录路径的字符串指针。该路径可以是相对路径或绝对路径。 |
| buf       | struct stat * | 指向 `struct stat` 结构的指针，用于存储获取到的文件或目录的状态信息。 |

### 函数返回值
- **成功**：返回 `0`，并且 `buf` 中会填充文件或目录的状态信息。
- **失败**：返回 `-1`，并且 `errno` 会被设置以指示错误类型。可能的错误包括但不限于：
  - `ENOENT`：文件或目录不存在。
  - `EACCES`：权限不足，无法访问文件或目录。
  - `ENOTDIR`：路径中的某个部分不是目录。
## vlc_lstat {#vlc_lstat}

```c
VLC_API int vlc_lstat( const char *filename, struct stat *buf );
```

### 描述
`vlc_lstat` 函数用于获取文件或目录的状态信息，类似于 `lstat` 系统调用。它不会跟随符号链接，而是直接获取符号链接本身的状态信息。

### 函数参数说明

| 参数名    | 类型        | 描述                                                                 |
|-----------|-------------|----------------------------------------------------------------------|
| filename  | `const char *` | 指向文件或目录路径的字符串指针，用于指定要获取状态信息的文件或目录。 |
| buf       | `struct stat *` | 指向 `stat` 结构体的指针，用于存储获取到的文件或目录的状态信息。     |

### 函数返回值
- **成功**：返回 `0`，并且 `buf` 中会填充文件或目录的状态信息。
- **失败**：返回 `-1`，并且会设置 `errno` 来指示具体的错误原因。可能的错误原因包括但不限于：
  - `ENOENT`：指定的文件或目录不存在。
  - `EACCES`：权限不足，无法访问指定的文件或目录。
  - `ENOTDIR`：路径中的一部分不是目录。
  - `EFAULT`：`filename` 或 `buf` 指向的地址无效。
## vlc_mkstemp {#vlc_mkstemp}

```c
VLC_API int vlc_mkstemp( char * );
```

### 描述
该函数用于创建一个唯一的临时文件，并返回文件描述符。文件名模板由调用者提供，函数会在模板中替换适当的字符以生成唯一的文件名。

### 函数参数说明

| 参数名 | 类型 | 描述 |
|--------|------|------|
| `char *` | 文件名模板 | 指向文件名模板的指针，模板中必须包含至少6个连续的 'X' 字符，这些字符将被替换以生成唯一的文件名。 |

### 函数返回值
- **成功**：返回一个非负的文件描述符，表示成功创建的临时文件。
- **失败**：返回 `-1`，并设置 `errno` 以指示错误类型。可能的错误包括：
  - `EINVAL`：文件名模板不符合要求，缺少足够的 'X' 字符。
  - `ENOENT`：指定的目录不存在。
  - `EACCES`：权限不足，无法在指定目录中创建文件。
  - `ENOSPC`：磁盘空间不足，无法创建文件。
  - `EEXIST`：尝试创建的文件名已存在，尽管这通常不应该发生，因为函数会生成唯一的文件名。
## vlc_dup {#vlc_dup}

```c
VLC_API int vlc_dup(int);
```

### 描述
`vlc_dup` 函数用于复制一个文件描述符。它类似于标准的 `dup` 函数，但提供了额外的错误检查和处理。

### 函数参数说明

| 参数名 | 类型 | 描述 |
|--------|------|------|
| `int`  | `fd` | 要复制的文件描述符。 |

### 函数返回值
- 成功时，返回新的文件描述符。
- 失败时，返回 `-1` 并设置 `errno` 以指示错误类型。可能的错误包括：
  - `EBADF`：传入的文件描述符无效。
  - `EMFILE`：进程已达到文件描述符的最大数量。
  - `ENFILE`：系统已达到打开文件的最大数量。
## vlc_pipe {#vlc_pipe}

```c
VLC_API int vlc_pipe( int[2] );
```

### 描述

`vlc_pipe` 函数用于创建一个管道（pipe）。管道是一种进程间通信（IPC）机制，允许一个进程将数据传递给另一个进程。该函数创建一个管道，并将管道的读端和写端分别存储在传入的数组中。

### 函数参数说明

| 参数名 | 类型 | 描述 |
|--------|------|------|
| `int[2]` | `int[2]` | 一个长度为2的整数数组，用于存储管道的读端和写端文件描述符。数组的第一个元素（`int[0]`）将存储读端文件描述符，第二个元素（`int[1]`）将存储写端文件描述符。 |

### 函数返回值

- **成功**：返回 `0`，并且数组中将包含有效的文件描述符。
- **失败**：返回 `-1`，并且 `errno` 将被设置以指示错误的原因。可能的错误包括：
  - `EMFILE`：进程已达到文件描述符的限制。
  - `ENFILE`：系统已达到文件描述符的限制。
  - `ENOMEM`：内存不足。
  - `EFAULT`：参数指向的地址无效。
